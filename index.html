<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تسديد</title>
    <!-- إضافة Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-2/css/all.min.css">
</head>
<body>
    <!-- الهيدر الثابت -->
    <header class="fixed-top bg-dark text-white py-1">
      <div class="container d-flex justify-content-between align-items-center" style="height: 50px;">
          <div class="d-flex align-items-center">
              <span class="fw-bold fs-6">تسديد</span>
              <img src="./img/logo_wite-removebg-preview.png" alt="Logo" class="img-fluid ms-2" style="width: 30px;">
          </div>
      </div>
  </header>
  


  <!-- سلايدر الإعلانات -->
  <div class="slider-wrapper">
    <div class="slider" id="ad-slider">
      <!-- الصور ستُضاف ديناميكيًا هنا -->
    </div>
  </div>
  

<!-- البحث -->
<div class="search-container">
  <button id="search-button">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" width="20" height="20">
      <circle cx="11" cy="11" r="7" stroke-width="1"></circle>
      <line x1="16" y1="16" x2="22" y2="22" stroke-width="2"></line>
    </svg>
  </button>
  <input type="text" id="search-input" placeholder="ما الذي تبحث عنه؟">
</div>

    <!-- الأقسام -->
    <section class="container">
      <h2 class="fw-bold mb-4 text-custom">تسوق من الأكثر رواجاً</h2>
      <div class="row row-cols-2 row-cols-md-4 g-4" id="categories-container">
          <!-- ستُضاف الأقسام ديناميكيًا هنا -->
      </div>
  </section>
  


    <div class="slider-wrapper">
      <div class="slider" id="image-slider">
        <div class="slide"><img src="./img/test.webp" alt="إعلان 1"></div>
        <div class="slide"><img src="./img/test.webp" alt="إعلان 2"></div>
        <div class="slide"><img src="./img/test.webp" alt="إعلان 3"></div>
        <div class="slide"><img src="./img/test.webp" alt="إعلان 4"></div>
        <div class="slide"><img src="./img/test.webp" alt="إعلان 5"></div>
      </div>
      </div>

<!-- منتجات مضافة حديثاً -->
<div class="container my-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="fw-bold text-custom">مضافة حديثآ</h2>
      <a href="./products/all_products.html" class="btn btn-link link-custom">عرض الكل</a>
  </div>
  <div class="overflow-auto">
      <div class="d-flex flex-nowrap gap-3" id="product-grid">
          <!-- بطاقة المنتج -->
          <div class="card" style="min-width: 200px; max-width: 250px;">
              <img src="./img/test.webp" class="card-img-top" alt="غسالة ملابس">
              <div class="card-body text-center">
                  <h5 class="card-title">غسالة ملابس</h5>
                  <p class="card-text">د.ع 689,000</p>
                  <button class="btn btn-success w-100">إضافة إلى السلة</button>
              </div>
          </div>
          <!-- بطاقة أخرى -->
          <div class="card" style="min-width: 200px; max-width: 250px;">
              <img src="./img/test.webp" class="card-img-top" alt="مكنسة كهربائية">
              <div class="card-body text-center">
                  <h5 class="card-title">مكنسة كهربائية</h5>
                  <p class="card-text">د.ع 340,724</p>
                  <button class="btn btn-success w-100">إضافة إلى السلة</button>
              </div>
          </div>
          <!-- يمكن تكرار المزيد من البطاقات هنا -->
      </div>
  </div>
</div>


    <!-- اكثر طلباً -->
    <div class="container my-5">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold text-custom">اكثر طلباً</h2>
        <a href="./products/most_requested.html" class="btn btn-link link-custom">عرض الكل</a>
    </div>
    
      <div class="overflow-auto">
          <div class="d-flex gap-3" id="most-requested-grid">
              <!-- ستُضاف المنتجات ديناميكيًا هنا -->
              <div class="product-card">
                  <img src="./img/test.webp" class="img-fluid" alt="غسالة ملابس">
                  <h3 class="mt-2">غسالة ملابس</h3>
                  <p>د.ع 689,000</p>
                  <button class="btn btn-success w-100">إضافة إلى السلة</button>
              </div>
              <div class="product-card">
                  <img src="./img/test.webp" class="img-fluid" alt="مكنسة كهربائية">
                  <h3 class="mt-2">مكنسة كهربائية</h3>
                  <p>د.ع 340,724</p>
                  <button class="btn btn-success w-100">إضافة إلى السلة</button>
              </div>
              <!-- تكرار للبطاقات -->
          </div>
      </div>
  </div>
  

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./js/script.js"></script>
</body>


<script>
  // البحث عند النقر على الزر
  document.getElementById("search-button").addEventListener("click", function () {
    const searchInput = document.getElementById("search-input").value.trim();
  
    if (searchInput) {
      // طلب البحث من API
      const searchURL = `https://89.116.110.51:3000/aqs/api/v1/filterProducts/${searchInput}`;
  
      fetch(searchURL)
        .then((response) => response.json())
        .then((data) => {
          // عرض النتائج
          displaySearchResults(data);
        })
        .catch((error) => {
          console.error("Error fetching search results:", error);
        });
    } else {
      alert("يرجى إدخال كلمة للبحث!");
    }
  });
  
  // عرض نتائج البحث
  function displaySearchResults(results) {
    const productGrid = document.getElementById("product-grid");
    productGrid.innerHTML = ""; // تنظيف الشبكة
  
    results.forEach((product) => {
      // إنشاء بطاقة المنتج
      const productCard = document.createElement("div");
      productCard.className = "product-card";
      productCard.setAttribute(
        "onclick",
        `window.location.href=./categories/cook.html?id=${product.value}';`
      );
  
      // محتوى البطاقة
      productCard.innerHTML = `
        <h3>${product.label}</h3>
      `;
  
      // إضافة البطاقة إلى الشبكة
      productGrid.appendChild(productCard);
    });
  }
  </script>
  
  
  
    
    <script>  
      async function fetchCategories() {
        try {
          const response = await fetch('https://89.116.110.51:3000/aqs/api/v1/getCategories');
          const categories = await response.json();
    
          // تحقق من نجاح الاستجابة وتأكد من أن البيانات مصفوفة
          if (Array.isArray(categories)) {
            const container = document.getElementById('categories-container');
            container.innerHTML = ''; // تفريغ المحتوى الافتراضي
    
            // إنشاء أقسام ديناميكيًا
            categories.forEach(category => {
              // التأكد من أن القسم نشط
              if (category.active === 1) {
                const categoryElement = document.createElement('div');
                categoryElement.className = 'category';
                categoryElement.innerHTML = `
                  <div class="icon-box">
                    <a href="./categories/cook.html?id=${category.id}">
                      <img src="${category.image}" alt="${category.title}" style="cursor: pointer;">
                    </a>
                  </div>
                  <p>${category.title}</p>
                `;
                container.appendChild(categoryElement);
              }
            });
          } else {
            console.error('Unexpected data format:', categories);
          }
        } catch (error) {
          console.error('Error fetching categories:', error);
        }
      }
    
      // استدعاء الدالة عند تحميل الصفحة
      document.addEventListener('DOMContentLoaded', fetchCategories);
  
  
  
      async function fetchProducts() {
    try {
      const response = await fetch('https://89.116.110.51:3000/aqs/api/v1/getProductsRecently');
      const products = await response.json();
  
      const productGrid = document.getElementById('product-grid');
      productGrid.innerHTML = ''; // تفريغ المحتوى الافتراضي
  
      products.forEach((product) => {
        const productCard = `
          <div class="product-card" onclick="window.location.href='./products/sub_details.html?id=${product.id}';">
            <img src="${product.image}" alt="${product.title}">
            <h3>${product.title}</h3>
            <div class="price-separator"></div>
            <p>د.ع ${product.price.toLocaleString()}</p>
            <button onclick="addToCart(${product.id}); event.stopPropagation();">إضافة إلى السلة</button>
          </div>
        `;
        productGrid.innerHTML += productCard;
      });
    } catch (error) {
      console.error('Error fetching products:', error);
    }
  }
  // استدعاء الدالة عند تحميل الصفحة
  document.addEventListener('DOMContentLoaded', fetchProducts);
  
  // إضافة المنتج إلى السلة (وظيفة توضيحية)
  function addToCart(productId) {
    alert(`تمت إضافة المنتج رقم ${productId} إلى السلة!`);
  }
    </script>
</html>
