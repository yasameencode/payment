<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุชูุงุตูู ุงูููุชุฌ</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/sub.css">
    <!-- <link rel="stylesheet" href="../css/bottom_nav.css"> -->
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-2/css/all.min.css'><link rel="stylesheet" href="../css/style_nav.css">

  
</head>
<body>
  <header class="fixed-header">
    <div class="header-content">
        <!-- <div class="left-section">
            <span class="heart-icon">โค๏ธ</span>
        </div> -->
        <div class="right-section">
            <span class="header-text">ุชุณุฏูุฏ</span>
            <img src="../img/logo_wite-removebg-preview.png" alt="Logo" class="logo-icon">
        </div>
    </div>
</header>

  <!-- Header -->
  <header class="product-header">
    <a href="../index.html" class="back-arrow">
        <i class="fas fa-arrow-right" style="color: white;"></i>
    </a>
    
    <span class="title">ุชูุงุตูู ุงูููุชุฌ</span>
    <div class="right-icons">
        <i class="far fa-heart" style="color: transparent; -webkit-text-stroke: 1px red;"></i>
        <span class="icon share-icon">๐</span>
    </div>
</header>


  

    <!-- Product Image -->
    <div class="slider-wrapper2">
      <div class="slider2" id="ad-slider2">
        <!-- ุณูุชู ุฅุถุงูุฉ ุงูุตูุฑ ุฏููุงูููููุง ููุง -->
      </div>
    </div>
    

    <!-- Product Details -->
<div class="product-details">
  <h2 id="product-title">ุงุณู ุงูููุชุฌ</h2>
  <div class="separator"></div>
  <p>ุงูุดุฑูุฉ ุงูููุชุฌุฉ: <span class="highlight" id="brand-name">ุงูุดุฑูุฉ</span></p>
  <p>ุงูููุฏูู: <span class="highlight" id="product-model">ุงูููุฏูู</span></p>
  <p id="product-description">ุงููุตู: ููุฒุงุช ุงูููุชุฌ ุณุชุธูุฑ ููุง.</p>
  <div class="separator"></div>
</div>

  <!-- Price Section -->
<div class="price-section">
  <div class="price-label">
    <img src="../img/cardjpg.jpg" alt="ุฃููููุฉ ุงููุญูุธุฉ">
    <span>ุณุนุฑ ุงูููุชุฌ</span>
  </div>
  <div class="price-box">
    <span class="price" id="product-price">ุงูุณุนุฑ</span>
  </div>
  <span class="currency">ุฏููุงุฑ ุนุฑุงูู</span>
</div>

<!-- Counter Section -->
<div class="counter" id="counter-section" style="display: none;">
  <button id="decrease">-</button>
  <span id="count">1</span>
  <button id="increase">+</button>
</div>

<!-- Add to Cart Button -->
<div class="add-to-cart" id="add-to-cart">
  ุฅุถุงูุฉ ุฅูู ุงูุณูุฉ
</div>




    <!-- JavaScript -->
    <script>
      // ุงุณุชุฎุฑุงุฌ ูุนุฑู ุงูููุชุฌ ูู ุงูุฑุงุจุท ูุชุญูููู ุฅูู ุฑูู
      const urlParams = new URLSearchParams(window.location.search);
      const productId = Number(urlParams.get('id')); // ุชุญููู ุฅูู ุฑูู
      
      // ุนูุงุตุฑ ุงูุตูุญุฉ
      const counterSection = document.getElementById('counter-section');
      const countElement = document.getElementById('count');
      const productPriceElement = document.getElementById('product-price');
      const addToCartButton = document.getElementById('add-to-cart');
      
      // ุงููุชุบูุฑุงุช
      let count = 1; // ุงูุนุฏุงุฏ ุงูุงูุชุฑุงุถู
      let productPrice = 0; // ุงูุณุนุฑ ุงูุฃุณุงุณู
    
      // ุงูุชุญูู ุฅุฐุง ูุงู ุงูููุชุฌ ููุฌูุฏูุง ูู ุงูุณูุฉ
      function checkIfProductInCart(productId) {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        return cart.find((item) => item.id === productId);
      }
    
      // ุชุญุฏูุซ ุญุงูุฉ ุงูุตูุญุฉ ุจูุงุกู ุนูู ูุฌูุฏ ุงูููุชุฌ ูู ุงูุณูุฉ
      function updatePageState() {
        const existingProduct = checkIfProductInCart(productId);
        if (existingProduct) {
          // ุงูููุชุฌ ููุฌูุฏ ูู ุงูุณูุฉ: ุฅุธูุงุฑ ุงูุนุฏุงุฏ ูุฅุฎูุงุก ุฒุฑ ุงูุฅุถุงูุฉ
          count = existingProduct.quantity;
          countElement.textContent = count;
          counterSection.style.display = 'flex';
          addToCartButton.style.display = 'none';
          updateTotalPrice();
        } else {
          // ุงูููุชุฌ ุบูุฑ ููุฌูุฏ: ุฅุธูุงุฑ ุฒุฑ ุงูุฅุถุงูุฉ
          counterSection.style.display = 'none';
          addToCartButton.style.display = 'block';
        }
      }
    
      // ุฌูุจ ุชูุงุตูู ุงูููุชุฌ ูู ุงูู API
      async function fetchProductDetails() {
        try {
          const response = await fetch(`https://89.116.110.51:3000/aqs/api/v1/getProduct/${productId}`);
          const product = await response.json();
    
          // ุชุญุฏูุซ ุนูุงุตุฑ ุงูุตูุญุฉ
          document.getElementById('product-title').textContent = product.title;
          document.getElementById('brand-name').textContent = product.brand || 'ุบูุฑ ูุชููุฑ';
          document.getElementById('product-model').textContent = product.model || 'ุบูุฑ ูุชููุฑ';
          document.getElementById('product-description').textContent = product.description;
    
          // ุชุฎุฒูู ุงูุณุนุฑ ุงูุฃุณุงุณู ูุชุญุฏูุซ ุงูุณุนุฑ ูู ุงูุตูุญุฉ
          productPrice = product.price;
          productPriceElement.textContent = `${productPrice.toLocaleString()} ุฏ.ุน`;
    
          // ุฅุถุงูุฉ ุงูุตูุฑ ุฅูู ุงูุณูุงูุฏุฑ
          const slider = document.getElementById('ad-slider2');
          product.images.forEach((imageUrl) => {
            const slide = document.createElement('div');
            slide.className = 'slide2';
            slide.innerHTML = `<img src="${imageUrl}" alt="${product.title}">`;
            slider.appendChild(slide);
          });
    
          // ุชุญุฏูุซ ุญุงูุฉ ุงูุตูุญุฉ ุจูุงุกู ุนูู ุงูุณูุฉ
          updatePageState();
    
          // ุฅุนุฏุงุฏ ุฒุฑ "ุฅุถุงูุฉ ุฅูู ุงูุณูุฉ"
          addToCartButton.addEventListener('click', () => {
            showCounter();
            addToCart(product);
          });
        } catch (error) {
          console.error('Error fetching product details:', error);
        }
      }
    
      // ุฏุงูุฉ ูุนุฑุถ ุงูุนุฏุงุฏ ุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ "ุฅุถุงูุฉ ุฅูู ุงูุณูุฉ"
      function showCounter() {
        count = 1; // ุฅุนุงุฏุฉ ุถุจุท ุงูุนุฏุงุฏ ุฅูู 1
        countElement.textContent = count; // ุชุญุฏูุซ ุงููุต
        counterSection.style.display = 'flex'; // ุฅุธูุงุฑ ุงูุนุฏุงุฏ
        addToCartButton.style.display = 'none'; // ุฅุฎูุงุก ุฒุฑ "ุฅุถุงูุฉ ุฅูู ุงูุณูุฉ"
        updateTotalPrice(); // ุชุญุฏูุซ ุงูุณุนุฑ ุงูุฅุฌูุงูู
      }
    
      // ุงูุชุญูู ูู ุงูุนุฏุงุฏ
      document.getElementById('increase').addEventListener('click', () => {
        count++;
        countElement.textContent = count;
        updateCartQuantity(productId, count); // ุชุญุฏูุซ ุงููููุฉ ูู ุงูุณูุฉ
        updateTotalPrice(); // ุชุญุฏูุซ ุงูุณุนุฑ ุงูุฅุฌูุงูู
      });
    
      document.getElementById('decrease').addEventListener('click', () => {
        if (count > 1) {
          count--;
          countElement.textContent = count;
          updateCartQuantity(productId, count); // ุชุญุฏูุซ ุงููููุฉ ูู ุงูุณูุฉ
          updateTotalPrice(); // ุชุญุฏูุซ ุงูุณุนุฑ ุงูุฅุฌูุงูู
        } else if (count === 1) {
          hideCounter(); // ุฅุฎูุงุก ุงูุนุฏุงุฏ ุนูุฏ ุงููุตูู ุฅูู 1
        }
      });
    
      // ุฏุงูุฉ ูุฅุฎูุงุก ุงูุนุฏุงุฏ
      function hideCounter() {
        count = 1; // ุฅุนุงุฏุฉ ุถุจุท ุงูุนุฏุงุฏ ุฅูู 1
        countElement.textContent = count; // ุชุญุฏูุซ ุงููุต
        counterSection.style.display = 'none'; // ุฅุฎูุงุก ุงูุนุฏุงุฏ
        addToCartButton.style.display = 'block'; // ุฅุธูุงุฑ ุฒุฑ "ุฅุถุงูุฉ ุฅูู ุงูุณูุฉ"
        removeFromCart(productId); // ุฅุฒุงูุฉ ุงูููุชุฌ ูู ุงูุณูุฉ
      }
    
      // ุชุญุฏูุซ ุงูุณุนุฑ ุงูุฅุฌูุงูู
      function updateTotalPrice() {
        const totalPrice = count * productPrice;
        productPriceElement.textContent = `${totalPrice.toLocaleString()} ุฏ.ุน`;
      }
    
      // ุฏุงูุฉ ูุฅุถุงูุฉ ุงูููุชุฌ ุฅูู ุงูุณูุฉ
      function addToCart(product) {
        const cartItem = {
          id: product.id,
          name: product.title,
          price: product.price,
          quantity: count,
          image: product.image,
        };
    
        // ุงุณุชุฑุฌุงุน ุงูุณูุฉ ุงูุญุงููุฉ ูู localStorage
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        cart.push(cartItem);
    
        // ุญูุธ ุงูุณูุฉ
        localStorage.setItem('cart', JSON.stringify(cart));
    
        alert('ุชูุช ุฅุถุงูุฉ ุงูููุชุฌ ุฅูู ุงูุณูุฉ!');
      }
    
      // ุชุญุฏูุซ ุงููููุฉ ูู ุงูุณูุฉ
      function updateCartQuantity(productId, quantity) {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        const product = cart.find((item) => item.id === productId);
        if (product) {
          product.quantity = quantity;
          localStorage.setItem('cart', JSON.stringify(cart));
        }
      }
    
      // ุฅุฒุงูุฉ ุงูููุชุฌ ูู ุงูุณูุฉ
      function removeFromCart(productId) {
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        cart = cart.filter((item) => item.id !== productId);
        localStorage.setItem('cart', JSON.stringify(cart));
      }
    
      // ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ ุนูุฏ ุชุญููู ุงูุตูุญุฉ
      document.addEventListener('DOMContentLoaded', fetchProductDetails);
    </script>
    
    
      
  
<!-- <script>
  document.querySelector('.back-icon').addEventListener('click', () => {
      window.history.back(); // ุงูุฑุฌูุน ููุตูุญุฉ ุงูุณุงุจูุฉ
  });

  document.querySelector('.share-icon').addEventListener('click', () => {
      alert('ูุดุงุฑูุฉ ุงูููุชุฌ!'); // ุงุณุชุจุฏู ูุฐุง ุจุงูุฅุฌุฑุงุก ุงูููุงุณุจ
  });
</script> -->


  <script src="../js/script.js"></script>
</body>



  <script src='https://cdnjs.cloudflare.com/ajax/libs/gsap/3.3.3/gsap.min.js'></script><script  src="../js/script_nav.js"></script>

  <script>
    function navigateTo(page) {
      window.location.href = page;
    }
  </script>
</html>
